
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Branch Documentation for Deep Linking">
      
      
        <link rel="canonical" href="https://branchmetrics.github.io/docs/pages/web/amp-journeys/">
      
      
        <meta name="author" content="Branch">
      
      
        <link rel="shortcut icon" href="../../../img/favicon-96x96.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.7.5">
    
    
      
        <title>AMP Journeys - Branch Documentation</title>
      
    
    
      <script src="../../../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <style>.async-hide{opacity:0!important}</style>
      <script>!function(e,t,a,n,o,i,c,s,g){t.className+=" "+a,i.start=1*new Date,i.end=c=function(){t.className=t.className.replace(RegExp(" ?"+a),"")},(e[n]=e[n]||[]).hide=i,setTimeout(function(){c(),i.end=null},o),i.timeout=o}(window,document.documentElement,"async-hide","dataLayer",4e3,{"GTM-PCPBXCN":!0}),function(e,t,a,n,o,i,c){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(a),c=t.getElementsByTagName(a)[0],i.async=1,i.src=n,c.parentNode.insertBefore(i,c)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","","auto"),ga("require","GTM-PCPBXCN"),ga("send","pageview")</script>
    
    
      <script>!function(e,t){if(!t.__SV){var n=window;try{var i,a,p,o=n.location,r=o.hash;i=function(e,t){return(a=e.match(RegExp(t+"=([^&]*)")))?a[1]:null},r&&i(r,"state")&&(p=JSON.parse(decodeURIComponent(i(r,"state"))),"mpeditor"===p.action&&(n.sessionStorage.setItem("_mpcehash",r),history.replaceState(p.desiredHash||"",e.title,o.pathname+o.search)))}catch(e){}var l,s;window.mixpanel=t,t._i=[],t.init=function(e,n,i){function a(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}var p=t;for("undefined"!=typeof i?p=t[i]=[]:i="mixpanel",p.people=p.people||[],p.toString=function(e){var t="mixpanel";return"mixpanel"!==i&&(t+="."+i),e||(t+=" (stub)"),t},p.people.toString=function(){return p.toString(1)+".people (stub)"},l="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" "),s=0;s<l.length;s++)a(p,l[s]);t._i.push([e,n,i])},t.__SV=1.2,n=e.createElement("script"),n.type="text/javascript",n.async=!0,n.src="undefined"!=typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js",i=e.getElementsByTagName("script")[0],i.parentNode.insertBefore(n,i)}}(document,window.mixpanel||[]),mixpanel.init("47ec8ea9ac102b1370221dcda476091c")</script>
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css">
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application-769c285a91.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-02c2a4388f.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../../css/main.css">
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="light-blue" data-md-color-accent="light-blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="https://branchmetrics.github.io/docs" title="Branch Documentation" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Deep link web
                </span>
              
            
            AMP Journeys
          
        </span>
      </div>
      
        <div class="branch-header-button md-flex__cell md-flex__cell--shrink">
          <a href="http://dev.branch.io/" id="header-old-docs" title="old docs">
            <i class="branch-header-icon md-icon material-icons">restore_page</i>
            <p class="branch-header-label">Old&nbsp;Docs</p>
          </a>
        </div>
        <div class="branch-header-button md-flex__cell md-flex__cell--shrink">
          <a href="#header-helpful" id="header-helpful" title="Helpful">
            <i class="branch-header-icon md-icon material-icons">thumb_up</i>
            <p class="branch-header-label">Helpful</p>
          </a>
        </div>
        <div class="branch-header-button md-flex__cell md-flex__cell--shrink">
          <a href="#header-unhelpful" id="header-unhelpful" title="Unhelpful">
            <i class="branch-header-icon md-icon material-icons">thumb_down</i>
            <p class="branch-header-label">Unhelpful</p>
          </a>
        </div>
        <div class="branch-header-button md-flex__cell md-flex__cell--shrink">
          <a href="#" class="improve-doc" title="Improve This Doc">
            <i class="branch-header-icon md-icon material-icons">mode_edit</i>
            <p class="branch-header-label">Improve</p>
          </a>
        </div>
        <div class="branch-header-button md-flex__cell md-flex__cell--shrink">
          <a href="#" class="contact-support" title="Contact support">
            <i class="branch-header-icon md-icon material-icons">help_outline</i>
            <p class="branch-header-label">Support</p>
          </a>
        </div>
        <div class="branch-header-button md-flex__cell md-flex__cell--shrink">
          <a href="#header-search" id="header-search" title="Search">
            <i class="branch-header-icon md-icon material-icons">search</i>
            <p class="branch-header-label">Search</p>
          </a>
        </div>
        <div class="md-flex__cell md-flex__cell--shrink" style="display:none">
      
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/branchmetrics/docs" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Branch Documentation
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Branch Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/branchmetrics/docs" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Branch Documentation
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      
      
        
      
        
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

    
      
      
      
      
        
          <li class="md-nav__item md-nav__link branch-nav-header">
            Basic deep linking
          </li>
        
      
        
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Integrate your app
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Integrate your app
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/ios/" title="iOS" class="md-nav__link">
      iOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/android/" title="Android" class="md-nav__link">
      Android
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/adobe-air/" title="Adobe AIR" class="md-nav__link">
      Adobe AIR
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/cordova-phonegap-ionic/" title="Cordova PhoneGap Ionic" class="md-nav__link">
      Cordova PhoneGap Ionic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/mparticle-android/" title="mParticle Android" class="md-nav__link">
      mParticle Android
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/mparticle-ios/" title="mParticle iOS" class="md-nav__link">
      mParticle iOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/titanium/" title="Titanium" class="md-nav__link">
      Titanium
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/react-native/" title="React Native" class="md-nav__link">
      React Native
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/unity/" title="Unity" class="md-nav__link">
      Unity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/xamarin/" title="Xamarin" class="md-nav__link">
      Xamarin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      
      
        
      
        
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Integrate your website
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Integrate your website
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      
      
        
      
        
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Create deep links
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Create deep links
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../links/behavior/" title="Link behavior" class="md-nav__link">
      Link behavior
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../links/data/" title="Link data" class="md-nav__link">
      Link data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../links/link-domain/" title="Link domain" class="md-nav__link">
      Link domain
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../links/create/" title="Creating links" class="md-nav__link">
      Creating links
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      
      
        
      
        
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Track analytics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Track analytics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../analytics/behavior/" title="Behavior" class="md-nav__link">
      Behavior
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../analytics/referrals/" title="Referrals" class="md-nav__link">
      Referrals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../analytics/growth-attribution/" title="Growth" class="md-nav__link">
      Growth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../analytics/user-value attribution/" title="User Value" class="md-nav__link">
      User Value
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../analytics/revenue-attribution/" title="Revenue" class="md-nav__link">
      Revenue
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      
      
        
      
        
          <li class="md-nav__item md-nav__link branch-nav-header">
            Advance deep linking
          </li>
        
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Deep link web
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Deep link web
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../deep-views/" title="Deepviews" class="md-nav__link">
      Deepviews
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../journeys/" title="Journeys App Banners" class="md-nav__link">
      Journeys App Banners
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        AMP Journeys
      </label>
    
    <a href="./" title="AMP Journeys" class="md-nav__link md-nav__link--active">
      AMP Journeys
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup" title="Setup" class="md-nav__link">
    Setup
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-the-branch-amp-sdk-to-your-site" title="Add the Branch AMP SDK to your site" class="md-nav__link">
    Add the Branch AMP SDK to your site
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#target-amp-web-in-your-audience" title="Target AMP Web in your audience" class="md-nav__link">
    Target AMP Web in your audience
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select-an-amp-compatible-template" title="Select an AMP-compatible template" class="md-nav__link">
    Select an AMP-compatible template
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate-test-your-amp-journey" title="Validate &amp; Test your AMP Journey" class="md-nav__link">
    Validate &amp; Test your AMP Journey
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-selected-template-is-not-amp-compatible" title="The selected template is not AMP-compatible" class="md-nav__link">
    The selected template is not AMP-compatible
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#track-analytics" title="Track Analytics" class="md-nav__link">
    Track Analytics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced" title="Advanced" class="md-nav__link">
    Advanced
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#targeting-audiences-with-a-url" title="Targeting Audiences with a URL" class="md-nav__link">
    Targeting Audiences with a URL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deep-linking-with-amp" title="Deep linking with AMP" class="md-nav__link">
    Deep linking with AMP
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-query-parameters-in-the-amp-sdk" title="Add query parameters in the AMP SDK" class="md-nav__link">
    Add query parameters in the AMP SDK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-layout-customization" title="Dynamic layout customization" class="md-nav__link">
    Dynamic layout customization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-deep-link-data-in-the-journeys-dashboard" title="Add deep link data in the Journeys dashboard" class="md-nav__link">
    Add deep link data in the Journeys dashboard
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support" title="Support" class="md-nav__link">
    Support
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#amp-specific-restrictions" title="AMP-specific Restrictions" class="md-nav__link">
    AMP-specific Restrictions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#targeting-limitations" title="Targeting Limitations" class="md-nav__link">
    Targeting Limitations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#banner-limitations" title="Banner Limitations" class="md-nav__link">
    Banner Limitations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../text-me-the-app/" title="Text Me The App" class="md-nav__link">
      Text Me The App
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      
      
        
      
        
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Deep link ads
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Deep link ads
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/apple/" title="Apple Search Ads" class="md-nav__link">
      Apple Search Ads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/dynamic-product-feeds/" title="Dynamic Product Feeds" class="md-nav__link">
      Dynamic Product Feeds
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/branch-universal-ads/" title="Branch Universal Ads" class="md-nav__link">
      Branch Universal Ads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/doubleclick/" title="Doubleclick" class="md-nav__link">
      Doubleclick
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/google-ads-overview/" title="Google Ads Overview" class="md-nav__link">
      Google Ads Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/google-search-install-ads/" title="Google Search App Install Ads" class="md-nav__link">
      Google Search App Install Ads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/google-search-engagement-ads/" title="Google Search App Engagement Ads" class="md-nav__link">
      Google Search App Engagement Ads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/google-display-install-ads/" title="Google Display App Install Ads" class="md-nav__link">
      Google Display App Install Ads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/google-display-engagement-ads/" title="Google Display App Engagement Ads" class="md-nav__link">
      Google Display App Engagement Ads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/google-uac/" title="Google Universal App Campaigns" class="md-nav__link">
      Google Universal App Campaigns
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/google-xplatform-search-ads/" title="Google Search Network Ads" class="md-nav__link">
      Google Search Network Ads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/google-xplatform-display-ads/" title="Google Display Network Ads" class="md-nav__link">
      Google Display Network Ads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/google-conversions/" title="Google Adwords Conversion Setup" class="md-nav__link">
      Google Adwords Conversion Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/google-video-ads/" title="Google Video Ads" class="md-nav__link">
      Google Video Ads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/facebook-app-installs/" title="Facebook App Installs" class="md-nav__link">
      Facebook App Installs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/facebook-app-engagement/" title="Facebook App Engagement" class="md-nav__link">
      Facebook App Engagement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/facebook-instagram/" title="Facebook Instagram" class="md-nav__link">
      Facebook Instagram
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/twitter/" title="Twitter Ads" class="md-nav__link">
      Twitter Ads
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      
      
        
      
        
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Deep link emails
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Deep link emails
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../emails/responsys/" title="Responsys" class="md-nav__link">
      Responsys
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../emails/sfmc/" title="SFMC" class="md-nav__link">
      SFMC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../emails/sendgrid/" title="SendGrid" class="md-nav__link">
      SendGrid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../emails/sailthru/" title="Sailthru" class="md-nav__link">
      Sailthru
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../emails/appboy/" title="AppBoy" class="md-nav__link">
      AppBoy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../emails/self-serve/" title="Self Serve" class="md-nav__link">
      Self Serve
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      
      
        
      
        
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Deep link organic search
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Deep link organic search
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../organic-search/firebase/" title="Firebase" class="md-nav__link">
      Firebase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../organic-search/spotlight/" title="Spotlight" class="md-nav__link">
      Spotlight
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      
      
        
      
        
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Deep link apps
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Deep link apps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-to-app/android-instant-apps/" title="Android Instant Apps" class="md-nav__link">
      Android Instant Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-to-app/imessage-apps/" title="iMessage Apps" class="md-nav__link">
      iMessage Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-to-app/facebook-app-invites/" title="Facebook App Invites" class="md-nav__link">
      Facebook App Invites
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      
      
        
      
        
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Export analytics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Export analytics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../exports/csv/" title="CSV Export" class="md-nav__link">
      CSV Export
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../exports/api/" title="Export API" class="md-nav__link">
      Export API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../exports/webhooks/" title="Webhooks" class="md-nav__link">
      Webhooks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      
      
        
      
        
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Integrate analytics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Integrate analytics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/adobe-analytics/" title="Abobe Analytics" class="md-nav__link">
      Abobe Analytics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/adjust/" title="Adjust" class="md-nav__link">
      Adjust
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/amplitude/" title="Amplitude" class="md-nav__link">
      Amplitude
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/appmetrica/" title="AppMetrica" class="md-nav__link">
      AppMetrica
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/appboy/" title="Appboy" class="md-nav__link">
      Appboy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/appsflyer/" title="Appsflyer" class="md-nav__link">
      Appsflyer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/fabric-answers/" title="Fabric Answers" class="md-nav__link">
      Fabric Answers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/google-analytics/" title="Google Analytics" class="md-nav__link">
      Google Analytics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/kochava/" title="Kochava" class="md-nav__link">
      Kochava
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/localytics/" title="Localytics" class="md-nav__link">
      Localytics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/mixpanel/" title="Mixpanel" class="md-nav__link">
      Mixpanel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/tune/" title="Tune" class="md-nav__link">
      Tune
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup" title="Setup" class="md-nav__link">
    Setup
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-the-branch-amp-sdk-to-your-site" title="Add the Branch AMP SDK to your site" class="md-nav__link">
    Add the Branch AMP SDK to your site
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#target-amp-web-in-your-audience" title="Target AMP Web in your audience" class="md-nav__link">
    Target AMP Web in your audience
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select-an-amp-compatible-template" title="Select an AMP-compatible template" class="md-nav__link">
    Select an AMP-compatible template
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate-test-your-amp-journey" title="Validate &amp; Test your AMP Journey" class="md-nav__link">
    Validate &amp; Test your AMP Journey
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-selected-template-is-not-amp-compatible" title="The selected template is not AMP-compatible" class="md-nav__link">
    The selected template is not AMP-compatible
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#track-analytics" title="Track Analytics" class="md-nav__link">
    Track Analytics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced" title="Advanced" class="md-nav__link">
    Advanced
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#targeting-audiences-with-a-url" title="Targeting Audiences with a URL" class="md-nav__link">
    Targeting Audiences with a URL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deep-linking-with-amp" title="Deep linking with AMP" class="md-nav__link">
    Deep linking with AMP
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-query-parameters-in-the-amp-sdk" title="Add query parameters in the AMP SDK" class="md-nav__link">
    Add query parameters in the AMP SDK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-layout-customization" title="Dynamic layout customization" class="md-nav__link">
    Dynamic layout customization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-deep-link-data-in-the-journeys-dashboard" title="Add deep link data in the Journeys dashboard" class="md-nav__link">
    Add deep link data in the Journeys dashboard
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support" title="Support" class="md-nav__link">
    Support
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#amp-specific-restrictions" title="AMP-specific Restrictions" class="md-nav__link">
    AMP-specific Restrictions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#targeting-limitations" title="Targeting Limitations" class="md-nav__link">
    Targeting Limitations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#banner-limitations" title="Banner Limitations" class="md-nav__link">
    Banner Limitations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/branchmetrics/docs/edit/master/src/pages/web/amp-journeys.md" title="Edit this page" class="md-icon md-content__icon">edit</a>
                
                
                  <h1>AMP Journeys</h1>
                
                <h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p><a href="https://www.ampproject.org/">Accelerated Mobile Pages (AMP)</a> are a way to build pages that serve static content so that they load in Google search results much faster. Google uses AMP to quickly serve content on mobile devices without users having to click through to a website to view the content, and AMP pages often appear at the top of mobile search results.</p>
<p>AMP pages by design make it difficult for users to go anywhere except back to Google search, and difficult for you to convert users to your website or your app. With AMP-compatible Journeys, you can convert mobile web traffic from Google search results to your app and take advantage of extra traffic from AMP pages. Select Journeys templates can be shown on your AMP-compatible website.</p>
<div class="admonition note">
<p class="admonition-title">Pre-reqs</p>
<ul>
<li>To host AMP Journeys and show in Google search as an AMP page, your webpage must be <a href="https://www.ampproject.org/docs/">AMP</a>-compatible.</li>
<li>Journeys uses your alternate domain for Universal Links. Make sure you include your <code>xxxx-alternate.app.link</code> domain in your <a href="../{{base.url}}/getting-started/universal-app-links/guide/ios/#add-the-associated-domains-entitlement-to-your-project">Associated Domains</a>. If you’re unsure of your Branch-assigned app.link subdomain, <a href="https://support.branch.io/support/tickets/new">contact support</a></li>
</ul>
</div>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h2>
<h3 id="add-the-branch-amp-sdk-to-your-site">Add the Branch AMP SDK to your site<a class="headerlink" href="#add-the-branch-amp-sdk-to-your-site" title="Permanent link">&para;</a></h3>
<p>The AMP SDK consists of 2-3 snippets that you can insert into your AMP page.</p>
<p>Add the following snippet between the AMP page’s <code>&lt;head&gt;&lt;/head&gt;</code> tags</p>
<div class="codehilite"><pre><span></span>   <span class="p">&lt;</span><span class="nt">style</span> <span class="na">amp-custom</span><span class="p">&gt;#</span><span class="nn">branch-amp-journey</span><span class="p">{</span><span class="k">bottom</span><span class="p">:</span><span class="mi">0</span><span class="p">;</span><span class="k">left</span><span class="p">:</span><span class="mi">0</span><span class="p">;</span><span class="k">width</span><span class="p">:</span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span><span class="k">height</span><span class="p">:</span><span class="mi">77</span><span class="kt">px</span><span class="p">;</span><span class="k">position</span><span class="p">:</span><span class="kc">fixed</span><span class="p">;}.</span><span class="nc">hideme</span><span class="p">{</span><span class="k">width</span><span class="p">:</span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span><span class="k">height</span><span class="p">:</span><span class="mi">77</span><span class="kt">px</span><span class="p">;</span><span class="k">left</span><span class="p">:</span><span class="mi">24</span><span class="kt">px</span><span class="p">;</span><span class="k">background-color</span><span class="p">:</span><span class="kc">none</span><span class="p">;</span><span class="k">position</span><span class="p">:</span><span class="kc">fixed</span><span class="p">;}.</span><span class="nc">close</span><span class="p">{</span><span class="k">width</span><span class="p">:</span><span class="mi">24</span><span class="kt">px</span><span class="p">;</span><span class="k">height</span><span class="p">:</span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span><span class="k">left</span><span class="p">:</span><span class="mi">0</span><span class="p">;</span><span class="k">z-index</span><span class="p">:</span><span class="mi">10000</span><span class="p">;</span><span class="k">background-color</span><span class="p">:</span><span class="kc">none</span><span class="p">;</span><span class="k">position</span><span class="p">:</span><span class="kc">fixed</span><span class="p">;}.</span><span class="nc">branch-amp-journey-inner</span><span class="p">{</span><span class="k">position</span><span class="p">:</span><span class="kc">relative</span><span class="p">;</span><span class="k">width</span><span class="p">:</span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span><span class="k">height</span><span class="p">:</span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span><span class="k">z-index</span><span class="p">:</span><span class="mi">9999</span><span class="p">;}.</span><span class="nc">donotdisplay</span><span class="p">{</span><span class="k">display</span><span class="p">:</span><span class="kc">none</span><span class="p">;}&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</pre></div>

<p>Modify the following snippet to include your domain instead of <strong><code>DOMAIN_HERE</code></strong> and your Branch key instead of <strong><code>BRANCH_KEY_HERE</code></strong> - in both the <code>amp-list</code> tag and the <code>amp-iframe</code> tag. You can find these in <a href="https://dashboard.branch.io/link-settings" target="_blank">Link Settings</a> and <a href="https://dashboard.branch.io/account-settings" target="_blank">Account Settings</a>.</p>
<p><div class="codehilite"><pre><span></span><span class="nt">&lt;amp-list</span> <span class="na">tabindex=</span><span class="s">0</span> <span class="na">role=</span><span class="s">&quot;&quot;</span> <span class="na">on=</span><span class="s">&quot;tap:branch-amp-journey.hide&quot;</span> <span class="na">id=</span><span class="s">&quot;branch-amp-journey&quot;</span> <span class="na">src=</span><span class="s">&quot;https://DOMAIN-HERE/branch-amp-journeys-pre?branch_key=BRANCH_KEY_HERE&amp;__aj_cid=CLIENT_ID(_s)&amp;__amp_viewer=VIEWER&amp;__aj_source_url=SOURCE_URL&amp;__aj_canonical_url=CANONICAL_URL&amp;__aj_v=1.0.0&quot;</span> <span class="na">layout=</span><span class="s">fixed-height</span> <span class="na">height=</span><span class="s">&quot;77px&quot;</span><span class="nt">&gt;&lt;template</span> <span class="na">type=</span><span class="s">&quot;amp-mustache&quot;</span> <span class="na">id=</span><span class="s">&quot;journey-template&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">class=</span><span class="s">&quot;close&quot;</span> <span class="na">on=</span><span class="s">&quot;tap:branch-amp-journey.hide&quot;</span><span class="nt">&gt;&lt;/a&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;hideme&quot;</span> <span class="nt">&gt;&lt;/div&gt;&lt;amp-iframe</span> <span class="na">class=</span><span class="s">&quot;branch-amp-journey-inner </span><span class="cp">{{</span><span class="nv">do_not_display</span><span class="cp">}}</span><span class="s">&quot;</span> <span class="na">layout=</span><span class="s">&quot;fixed-height&quot;</span> <span class="na">height=</span><span class="s">&quot;77px&quot;</span> <span class="err">resizable</span> <span class="na">src=</span><span class="s">&quot;https://DOMAIN-HERE/branch-amp-journeys?branch_key=BRANCH_KEY_HERE&amp;__aj_cid=</span><span class="cp">{{</span><span class="nv">__aj_cid</span><span class="cp">}}</span><span class="s">&amp;__aj_source_url=</span><span class="cp">{{</span><span class="nv">__aj_source_url</span><span class="cp">}}</span><span class="s">&amp;__aj_canonical_url=</span><span class="cp">{{</span><span class="nv">__aj_canonical_url</span><span class="cp">}}</span><span class="s">&amp;_audience_rule_id=</span><span class="cp">{{</span><span class="nv">_audience_rule_id</span><span class="cp">}}</span><span class="s">&amp;_branch_view_id=</span><span class="cp">{{</span><span class="nv">_branch_view_id</span><span class="cp">}}</span><span class="s">&amp;__aj_v=1.0.0&quot;</span> <span class="na">sandbox=</span><span class="s">&quot;allow-scripts allow-top-navigation allow-same-origin&quot;</span> <span class="na">frameborder=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;&lt;div</span> <span class="err">overflow</span><span class="nt">&gt;&lt;/div&gt;&lt;/amp-iframe&gt;&lt;/template&gt;&lt;/amp-list&gt;</span>
</pre></div>
Then add the modified snippet between the <code>&lt;body&gt;&lt;/body&gt;</code> tags of your AMP page, preferably near or at the bottom.</p>
<p>Finally, if you do not already have the following AMP scripts on your page, add them between the AMP page's <code>&lt;head&gt;&lt;/head&gt;</code> tags:
<div class="codehilite"><pre><span></span><span class="nt">&lt;script</span> <span class="err">async</span> <span class="na">src=</span><span class="s">&quot;https://cdn.ampproject.org/v0/amp-list-0.1.js&quot;</span> <span class="na">custom-element=</span><span class="s">&quot;amp-list&quot;</span><span class="nt">&gt;&lt;/script&gt;&lt;script</span> <span class="err">async</span> <span class="na">src=</span><span class="s">&quot;https://cdn.ampproject.org/v0/amp-mustache-0.1.js&quot;</span> <span class="na">custom-template=</span><span class="s">&quot;amp-mustache&quot;</span><span class="nt">&gt;&lt;/script&gt;&lt;script</span> <span class="err">async</span> <span class="na">src=</span><span class="s">&quot;https://cdn.ampproject.org/v0/amp-iframe-0.1.js&quot;</span> <span class="na">custom-element=</span><span class="s">&quot;amp-iframe&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div></p>
<div class="admonition protip">
<p class="admonition-title">Include canonical URL for SEO and deep linking</p>
<p><a href="https://www.ampproject.org/docs/guides/discovery" target="_blank">Google recommends</a> that on your AMP page, you include a reference to the canonical URL of the non-AMP page with the same content. For example, you should include a tag like this in the <code>&lt;head&gt;&lt;/head&gt;</code> section of your AMP page: <code>&lt;link rel="canonical" href="https://example.com/article.html"&gt;</code>. This helps make your AMP page discoverable, and likely helps ensure that SEO information is shared between these two pages. Additionally, Branch automatically embeds the canonical URL in the Journey link data, leading to better identification of content and the ability to use this key for deep linking.</p>
</div>
<h3 id="target-amp-web-in-your-audience">Target AMP Web in your audience<a class="headerlink" href="#target-amp-web-in-your-audience" title="Permanent link">&para;</a></h3>
<p>AMP Journeys can be created as part of the normal <a href="https://dashboard.branch.io/web/journeys/audiencerule/new" target="_blank">Journeys creation flow</a>. You can target users on AMP pages by checking the box <strong>AMP Web</strong> on the Select Audience step:</p>
<p><img alt="image" src="../../../img/pages/journeys/amp-checkbox.png" /></p>
<p>See the <a href="../../../marketing-channels/journeys/guide#select-audience" target="_blank">Journeys Guide</a> for more information on selecting your audience.</p>
<h3 id="select-an-amp-compatible-template">Select an AMP-compatible template<a class="headerlink" href="#select-an-amp-compatible-template" title="Permanent link">&para;</a></h3>
<p>Once you have your audience selected, you can configure your templates. Currently, only <strong>Branch Standard Banner Bottom</strong> is supported on AMP because Google requires that banners not show in the top 75% of an AMP page. Over time, Branch will add support for more Journeys templates.</p>
<p>When you click <strong>Select Template</strong> from the <strong>Configure Views</strong> step, the <strong>standard bottom banner</strong> view type should already be selected, showing you the Journeys templates that are compatible with AMP:</p>
<p><img alt="image" src="../../../img/pages/journeys/amp-select-template.png" /></p>
<p>Hover over the template and click <strong>Create</strong>.</p>
<h3 id="validate-test-your-amp-journey">Validate &amp; Test your AMP Journey<a class="headerlink" href="#validate-test-your-amp-journey" title="Permanent link">&para;</a></h3>
<p>On the <strong>Validate &amp; Test</strong> step, you will see AMP-specific messages if you have targeted <strong>AMP Web</strong> users on the <a href="#target-amp-web-in-your-audience">Select Audience</a> step.</p>
<p><img alt="image" src="../../../img/pages/journeys/amp-validation.png" /></p>
<h4 id="the-selected-template-is-not-amp-compatible">The selected template is not AMP-compatible<a class="headerlink" href="#the-selected-template-is-not-amp-compatible" title="Permanent link">&para;</a></h4>
<p>If Branch has detected that you have selected a template that is not compatible with AMP, you will see an error on the <strong>Validate &amp; Test</strong> step. <a href="#customization-limitations">See which templates are currently compatible</a>.</p>
<h3 id="track-analytics">Track Analytics<a class="headerlink" href="#track-analytics" title="Permanent link">&para;</a></h3>
<p>Analytics for AMP Journeys works the <a href="../../../marketing-channels/journeys/guide/#visualizing-journeys-performance">same way as for regular Journeys</a>, in that you can see clicks, opens, installs, and custom events tied to your Journey by clicking <strong>View Performance</strong> from the actions menu for your AMP Journey.</p>
<p><img alt="image" src="../../../img/pages/journeys/view-performance.png" /></p>
<h2 id="advanced">Advanced<a class="headerlink" href="#advanced" title="Permanent link">&para;</a></h2>
<h3 id="targeting-audiences-with-a-url">Targeting Audiences with a URL<a class="headerlink" href="#targeting-audiences-with-a-url" title="Permanent link">&para;</a></h3>
<p>With AMP, Google will serve your page from the Google AMP cache. This means that the URL that serves your AMP page will look something like <code>https://www.google.com/amp/s/www.example.com/amp/doc.html</code>. However, Branch passes through your original source URL, and this is what you should use for audience targeting. For the advanced audience filter <strong>Is viewing a page URL</strong>, you'll want to use the original URL where you host the AMP page. In this example, that would be <code>https://www.example.com/amp/doc.html</code>.</p>
<h3 id="deep-linking-with-amp">Deep linking with AMP<a class="headerlink" href="#deep-linking-with-amp" title="Permanent link">&para;</a></h3>
<p>You can [configure links] with deep link data on AMP in two ways:</p>
<ol>
<li>Add query parameters to your Branch link in the AMP SDK</li>
<li>Add deep link data to a Journey in the dashboard</li>
</ol>
<div class="admonition protip">
<p class="admonition-title">Use $canonical_url for deep linking</p>
<p>AMP Journeys, along with regular Journeys and the Quick Link Creator, automatically embeds <code>$canonical_url</code> in your link data based on meta tags on your web or AMP page. If you use this key to route to specific content in your app, you do not have to add anything extra for AMP.</p>
</div>
<h4 id="add-query-parameters-in-the-amp-sdk">Add query parameters in the AMP SDK<a class="headerlink" href="#add-query-parameters-in-the-amp-sdk" title="Permanent link">&para;</a></h4>
<p>To deep link to specific content in your app, you can add query parameters to your Branch link within the <code>amp-iframe</code>. Here is what the <code>amp-iframe</code> looks like without any query parameters:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;amp-iframe</span> <span class="na">class=</span><span class="s">&quot;branch-amp-journey-inner </span><span class="cp">{{</span><span class="nv">do_not_display</span><span class="cp">}}</span><span class="s">&quot;</span> <span class="na">layout=</span><span class="s">&quot;fixed-height&quot;</span> <span class="na">height=</span><span class="s">&quot;77px&quot;</span> <span class="err">resizable</span> <span class="na">src=</span><span class="s">&quot;https://DOMAIN-HERE/branch-amp-journeys?branch_key=BRANCH_KEY_HERE&amp;__aj_cid=</span><span class="cp">{{</span><span class="nv">__aj_cid</span><span class="cp">}}</span><span class="s">&amp;__aj_source_url=</span><span class="cp">{{</span><span class="nv">__aj_source_url</span><span class="cp">}}</span><span class="s">&amp;__aj_canonical_url=</span><span class="cp">{{</span><span class="nv">__aj_canonical_url</span><span class="cp">}}</span><span class="s">&amp;_audience_rule_id=</span><span class="cp">{{</span><span class="nv">_audience_rule_id</span><span class="cp">}}</span><span class="s">&amp;_branch_view_id=</span><span class="cp">{{</span><span class="nv">_branch_view_id</span><span class="cp">}}</span><span class="s">&amp;__aj_v=1.0.0&quot;</span> <span class="na">sandbox=</span><span class="s">&quot;allow-scripts allow-top-navigation allow-same-origin&quot;</span> <span class="na">frameborder=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;&lt;div</span> <span class="err">overflow</span><span class="nt">&gt;&lt;/div&gt;&lt;/amp-iframe&gt;</span>
</pre></div>

<p>If your deep linking keys were <strong>productId</strong> and <strong>category</strong>, for example, you would add <code>&amp;productId=1234&amp;category=shoes</code> to your <code>amp-iframe</code> like this:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;amp-iframe</span> <span class="na">class=</span><span class="s">&quot;branch-amp-journey-inner </span><span class="cp">{{</span><span class="nv">do_not_display</span><span class="cp">}}</span><span class="s">&quot;</span> <span class="na">layout=</span><span class="s">&quot;fixed-height&quot;</span> <span class="na">height=</span><span class="s">&quot;77px&quot;</span> <span class="err">resizable</span> <span class="na">src=</span><span class="s">&quot;https://DOMAIN-HERE/branch-amp-journeys?branch_key=BRANCH_KEY_HERE&amp;__aj_cid=</span><span class="cp">{{</span><span class="nv">__aj_cid</span><span class="cp">}}</span><span class="s">&amp;__aj_source_url=</span><span class="cp">{{</span><span class="nv">__aj_source_url</span><span class="cp">}}</span><span class="s">&amp;__aj_canonical_url=</span><span class="cp">{{</span><span class="nv">__aj_canonical_url</span><span class="cp">}}</span><span class="s">&amp;_audience_rule_id=</span><span class="cp">{{</span><span class="nv">_audience_rule_id</span><span class="cp">}}</span><span class="s">&amp;_branch_view_id=</span><span class="cp">{{</span><span class="nv">_branch_view_id</span><span class="cp">}}</span><span class="s">&amp;__aj_v=1.0.0&amp;productId=1234&amp;category=shoes&quot;</span> <span class="na">sandbox=</span><span class="s">&quot;allow-scripts allow-top-navigation allow-same-origin&quot;</span> <span class="na">frameborder=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;&lt;div</span> <span class="err">overflow</span><span class="nt">&gt;&lt;/div&gt;&lt;/amp-iframe&gt;</span>
</pre></div>

<p>If you are generating AMP pages programmatically, it makes sense to generate these keys as query params at the same time.</p>
<h4 id="dynamic-layout-customization">Dynamic layout customization<a class="headerlink" href="#dynamic-layout-customization" title="Permanent link">&para;</a></h4>
<p>You can customize the appearance of a Journey dynamically using query parameters on your <code>amp-iframe</code> link. These are the fields currently supported for dynamic layout customization on AMP:</p>
<table>
<thead>
<tr>
<th align="right"><strong>Link Data Key</strong></th>
<th><strong>Value</strong></th>
<th><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="right"><code>$journeys_button_get_has_app</code></td>
<td>The call to action button when the app is currently installed</td>
<td><code>$journeys_button_get_has_app=Download</code></td>
</tr>
<tr>
<td align="right"><code>$journeys_button_get_no_app</code></td>
<td>The call to action button when the app is <strong>not</strong> currently installed</td>
<td><code>$journeys_button_get_no_app=Read</code></td>
</tr>
<tr>
<td align="right"><code>$journeys_description</code></td>
<td>This is the description or subtitle in the frame</td>
<td><code>$journeys_description=Continue+reading+in+the+app.</code></td>
</tr>
</tbody>
</table>
<h4 id="add-deep-link-data-in-the-journeys-dashboard">Add deep link data in the Journeys dashboard<a class="headerlink" href="#add-deep-link-data-in-the-journeys-dashboard" title="Permanent link">&para;</a></h4>
<p>You can also add deep link data to a Journey in the dashboard. In the <strong>Customize Template</strong> screen, click the button and add your key:value pairs in the deep link data fields. For example if your deep linking key was <strong>productId</strong>:</p>
<p><img alt="image" src="../../../img/pages/journeys/amp-deep-link-data.png" /></p>
<h2 id="support">Support<a class="headerlink" href="#support" title="Permanent link">&para;</a></h2>
<h3 id="amp-specific-restrictions">AMP-specific Restrictions<a class="headerlink" href="#amp-specific-restrictions" title="Permanent link">&para;</a></h3>
<p>Because javascript is limited on AMP and cookies are restricted on both AMP and iOS, AMP Journeys does not support all of standard Journeys functionality. The following Journeys features are affected:</p>
<ul>
<li>Event-based audience rules work within AMP only or after a Branch link click on an AMP page. <a href="#audience-rule-limitations">Read more</a>.</li>
<li>Only templates on the bottom of the page and equal to 76px in height show on AMP. <a href="#customization-limitations">Read more</a>.</li>
<li><a href="../../../marketing-channels/journeys/guide/#dismiss">Dismiss period</a> is not supported - after dismiss, Journeys will show again during the next AMP session.</li>
<li><a href="../../../marketing-channels/journeys/guide/#clientside-javascript-journeys-controls">Client-side javascript controls</a> are not supported.</li>
<li>Auto-opening the app with open_app: true is not supported.</li>
<li><a href="../../../marketing-channels/journeys/guide/#deep-linking-from-the-banner-or-interstitial">Deep linking with setBranchViewData</a> is not supported. <a href="#deep-linking-with-amp">Learn how</a> you can deep link to content from AMP pages.</li>
</ul>
<h3 id="targeting-limitations">Targeting Limitations<a class="headerlink" href="#targeting-limitations" title="Permanent link">&para;</a></h3>
<p>Because cookies are restricted on both AMP and iOS, event-based audience rules on AMP Journeys are cookie-restricted. Practically, this means that targeting works <em>only within AMP</em> for the following rules:</p>
<ul>
<li>Has completed event</li>
<li>Has visited web</li>
<li>Has visited the app</li>
<li>Has the app installed</li>
</ul>
<p>Once a user has clicked a Branch link outside of AMP, event-based audience rules will adhere to the regular web cookie for that user, and will work across AMP and non-AMP web.</p>
<h3 id="banner-limitations">Banner Limitations<a class="headerlink" href="#banner-limitations" title="Permanent link">&para;</a></h3>
<p>For the time being, only banners of a fixed height and placement (bottom of the page) are compatible with AMP. This includes <strong>Branch Banner Bottom</strong>, or other custom banners with page placement on the bottom of the page and height of 76px.</p>
                
                  
                
              
              
                
                  <h2 id="__comments">Comments</h2>
                  <div id="disqus_thread"></div>
<script>
  var disqus_config = function () {
    this.page.url = "https://branchmetrics.github.io/docs/pages/web/amp-journeys/";
    this.page.identifier =
      "/pages/web/amp-journeys/";
  };
  (function() {
    var d = document, s = d.createElement("script");
    s.src = "//branch-docs.disqus.com/embed.js";
    s.setAttribute("data-timestamp", +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
                
              
            </article>
          </div>
        </div>
      </main>
      
        <div class="modals">
          <div id="modal-search" class="modal dialog">
            <div class="modal-background"></div>
            <div class="modal-content" id="algolia-search-container">
              <i class="material-icons modal-close right">close</i>
              <h2>Search</h2>
              <input type="text" placeholder="search docs..." id="algolia-doc-search" autofocus>
            </div>
          </div>
          <div id="modal-unhelpful" class="modal dialog">
            <div class="modal-background"></div>
            <div class="modal-content">
              <i class="material-icons modal-close right">close</i>
              <h2>Unhelpful?</h2>
              <p>How can we improve or assist you?</p>
              <a href="#" class="improve-doc" title="Improve This Doc">Improve this doc</a>
              <a href="#" class="contact-support" title="Contact support">Contact support</a>
            </div>
          </div>
          <div id="modal-choose-app" class="modal dialog">
            <div class="modal-background"></div>
            <div class="modal-content">
              <i class="material-icons modal-close right">close</i>
              <h2>Choose your app</h2>
              <button type="button">iOS</button>
              <button type="button">Android</button>
              <button type="button">Cordova Ionic PhoneGap</button>
              <button type="button">React Native</button>
            </div>
          </div>
          <div id="modal-helpful" class="modal notification">
            <div class="modal-background"></div>
            <div class="modal-content">
              <i class="material-icons modal-close right">close</i>
              <h2>Thank you</h2>
            </div>
          </div>
          <div id="modal-image" class="modal dialog image">
            <div class="modal-background"></div>
            <div class="modal-content">
              <i class="material-icons modal-close right">close</i>
              <h2>Image</h2>
              <a id="modal-image-link" href="#">
                <img id="modal-image-img">
              </a>
            </div>
          </div>
        </div>
      
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../journeys/" title="Journeys App Banners" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Journeys App Banners
              </span>
            </div>
          </a>
        
        
          <a href="../text-me-the-app/" title="Text Me The App" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Text Me The App
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 <a href="https://branch.io">Branch</a>
          </div>
        
        All rights reserved
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://branch.io" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/BranchMetrics/Documentation" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/branchmetrics" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.facebook.com/branchmetrics" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://www.linkedin.com/company-beta/3813083" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application-68a35578af.js"></script>
      
      
      <script>app.initialize({url:{base:"../../.."}})</script>
      
        <script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
        <script>docsearch({apiKey:"887017d17a2c1e9490ad2c44caa7e817",indexName:"branchmetrics",inputSelector:"#algolia-doc-search",debug:"True",algoliaOptions:{hitsPerPage:"15"}})</script>
      
      
        <script src="../../../js/main.js"></script>
      
    
    
      
    
  </body>
</html>